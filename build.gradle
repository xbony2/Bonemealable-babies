import java.time.Instant

buildscript {
	repositories {
		maven { url = 'https://files.minecraftforge.net/maven' }
		mavenCentral()
	}

	dependencies {
		classpath group: 'net.minecraftforge.gradle', name: 'ForgeGradle', version: '5.1.+', changing: true
	}
}

apply plugin: 'net.minecraftforge.gradle'
apply from: 'https://raw.githubusercontent.com/SizableShrimp/Forge-Class-Remapper/main/classremapper.gradle'

version = modVersion
group = 'xbony2.bonemealablebabies'
archivesBaseName = 'bonemealablebabies'
java.toolchain.languageVersion = JavaLanguageVersion.of(javaVersion)

minecraft {
	mappings channel: 'official', version: mcVersion
 
	runs {
		client {
			workingDirectory = project.file 'run'
			properties['forge.logging.markers'] = 'SCAN,REGISTRIES,REGISTRYDUMP'
			properties['forge.logging.console.level'] = 'debug'
			source sourceSets.main
		}
	
		server {
			workingDirectory = project.file 'run'
			properties['forge.logging.markers'] = 'SCAN,REGISTRIES,REGISTRYDUMP'
			properties['forge.logging.console.level'] = 'debug'
			source sourceSets.main
		}

		data {
			workingDirectory = project.file 'run'
			properties['forge.logging.markers'] = 'SCAN,REGISTRIES,REGISTRYDUMP'
			properties['forge.logging.console.level'] = 'debug'
			args '--mod', 'bonemealablebabies', '--all', '--output', file('src/generated/resources/')
			source sourceSets.main
		}
	}
}

dependencies {
	minecraft "net.minecraftforge:forge:$forgeVersion"
}

jar.manifest.attributes([
	'Specification-Title': rootProject.name,
	'Specification-Vendor': project.group,
	'Specification-Version': '1',
	'Implementation-Title': rootProject.name,
	'Implementation-Version': project.version,
	'Implementation-Vendor': project.group,
	'Implementation-Timestamp': Instant.now()
])
